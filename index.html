<html><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

   
  <style>/* ! tailwindcss v3.3.2 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]{display:none}*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}.relative{position:relative}.m-2{margin:0.5rem}.m-auto{margin:auto}.mx-auto{margin-left:auto;margin-right:auto}.mb-4{margin-bottom:1rem}.mb-5{margin-bottom:1.25rem}.ml-1{margin-left:0.25rem}.mt-1{margin-top:0.25rem}.mt-10{margin-top:2.5rem}.mt-3{margin-top:0.75rem}.block{display:block}.flex{display:flex}.grid{display:grid}.h-10{height:2.5rem}.h-24{height:6rem}.h-6{height:1.5rem}.h-8{height:2rem}.w-1\/4{width:25%}.w-10{width:2.5rem}.w-24{width:6rem}.w-6{width:1.5rem}.w-8{width:2rem}.w-full{width:100%}.max-w-screen-sm{max-width:640px}.max-w-screen-xl{max-width:1280px}.grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.space-y-6 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.5rem * var(--tw-space-y-reverse))}.rounded-lg{border-radius:0.5rem}.rounded-xl{border-radius:0.75rem}.border{border-width:1px}.border-gray-300{--tw-border-opacity:1;border-color:rgb(209 213 219 / var(--tw-border-opacity))}.bg-gray-50{--tw-bg-opacity:1;background-color:rgb(249 250 251 / var(--tw-bg-opacity))}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.fill-current{fill:currentColor}.p-10{padding:2.5rem}.p-2{padding:0.5rem}.p-2\.5{padding:0.625rem}.p-4{padding:1rem}.p-5{padding:1.25rem}.py-5{padding-top:1.25rem;padding-bottom:1.25rem}.pr-10{padding-right:2.5rem}.pt-10{padding-top:2.5rem}.text-center{text-align:center}.text-right{text-align:right}.text-6xl{font-size:3.75rem;line-height:1}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:0.875rem;line-height:1.25rem}.text-xs{font-size:0.75rem;line-height:1rem}.font-semibold{font-weight:600}.text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128 / var(--tw-text-opacity))}.text-gray-600{--tw-text-opacity:1;color:rgb(75 85 99 / var(--tw-text-opacity))}.text-gray-700{--tw-text-opacity:1;color:rgb(55 65 81 / var(--tw-text-opacity))}.text-gray-900{--tw-text-opacity:1;color:rgb(17 24 39 / var(--tw-text-opacity))}.text-yellow-400{--tw-text-opacity:1;color:rgb(250 204 21 / var(--tw-text-opacity))}.shadow-lg{--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.ring-2{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.ring-8{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(8px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.ring-white{--tw-ring-opacity:1;--tw-ring-color:rgb(255 255 255 / var(--tw-ring-opacity))}.ring-opacity-40{--tw-ring-opacity:0.4}@media (prefers-color-scheme: dark){.dark\:text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity))}}@media (min-width: 640px){.sm\:w-full{width:100%}.sm\:max-w-screen-sm{max-width:640px}.sm\:grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.sm\:p-10{padding:2.5rem}.sm\:p-8{padding:2rem}}@media (min-width: 768px){.md\:grid-cols-4{grid-template-columns:repeat(4, minmax(0, 1fr))}}</style>

  <style>
    .search-input .search-box{
    padding: 0px;
    max-height: 280px;
    overflow-y: auto;
}

.search-input.active .search-box{
    padding: 10px 8px;
    opacity: 1;
    pointer-events: auto; 
}

.search-box li{
    list-style: none;
    padding: 8px 12px;
    width: 100%;
    cursor: default;
    border-radius: 3px;
    display: none;
}

.search-box li:hover{
    background: #efefef;
}

.search-input.active .search-box li{
    display: block;
}
  </style>
</head>
  <body>
      <div class="container pt-10 m-auto">
          <div class="relative sm:w-full  sm:max-w-screen-sm m-auto p-2 search-wrapper">
            <div class="search-wrapper">
                <div class="search-input">
                    <input type="text" id="input" placeholder="Enter location" aria-label="Enter location" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg  block w-full  p-2.5  ">
                    <div class="search-box">
                  </div>
                </div>
                
            </div>
              
          </div>
      </div>
      <div id="weather-container" class="container py-5 m-auto">
      
      
      </div>

      <script>
        // search dom constants

const searchWrapper = document.querySelector(".search-input");
const inputBox = searchWrapper.querySelector("#input");
const searchBox = searchWrapper.querySelector(".search-box");


//used incons from here https://github.com/basmilius/weather-icons/tree/dev
const condition = {
    0 : {cond: "Clear sky", icon:"clear-day.svg"},
    1 : {cond: "Mainly clear", icon:"clear-day.svg"},
    2 : {cond: "Partly cloudy", icon:"partly-cloudy-day.svg"},
    3 : {cond: "Overcast", icon: "overcast.svg"},
    45: {cond: "Fog", icon:"fog.svg"},
    48: {cond: "Depositing rime fog", icon:"fog.svg" },
    51: {cond: "Light drizzle", icon:"drizzle.svg"},
    53: {cond: "Drizzle", icon:"drizzle.svg"},
    55: {cond: "Dense drizzle", icon:"drizzle.svg"},
    53: {cond: "Drizzle", icon:"drizzle.svg"},
    56: {cond: "Light freezing drizzle", icon:"drizzle.svg"},
    57: {cond: "Dense freezing drizzle", icon:"drizzle.svg"},
    61: {cond: "Light rain", icon:"rain.svg"},
    63: {cond: "Rain", icon:"rain.svg"},
    65: {cond: "Heavy rain", icon:"rain.svg"},
    66: {cond: "Freezing rain", icon:"sleet.svg"},
    67: {cond: "Heavy freezing rain", icon:"sleet.svg"},
    71: {cond: "Light snow", icon:"snow.svg"},
    73: {cond: "Snow", icon:"snow.svg"},
    75: {cond: "Heavy snow", icon:"snow.svg"},
    77: {cond: "Snow grains", icon:"snow.svg"},
    80: {cond: "Light rain showers", icon:"rain.svg"},
    81: {cond: "Rain showers", icon:"rain.svg"},
    82: {cond: "Heavy rain showers", icon:"rain.svg"},
    85: {cond: "Snow showers", icon:"snow.svg"},
    86: {cond: "Heavy snow showers", icon:"snow.svg"},
    95: {cond: "Thunderstorm", icon:"thunderstorms.svg"},
    96: {cond: "Thunderstorm with light hail", icon:"thunderstorms.svg"},
    96: {cond: "Thunderstorm with heavy hail", icon:"thunderstorms.svg"},
};

// search for location
async function searchLocations(input) {
    const locationUrl = ("https://geocoding-api.open-meteo.com/v1/search?");
    if (input.length>1){
        let res = await fetch(`${locationUrl}name=${input}`);
        let data = await res.json();
        outputHTML (data.results);
    }else {
        searchWrapper.classList.remove("active");
        searchBox.innerHTML=("");
    };
};

// render search sugguestions and send user selection to get weather function
outputHTML = data => {
    searchWrapper.classList.add("active");
    tab = [];
    const html = data.map(match =>`<li>${match.name} (${match.admin1} | ${match.country_code})</li>`
    ).join("");
    searchBox.innerHTML = html;
    var items = searchBox.querySelectorAll("li");
    // on click send to get weather
    for (var i=0; i< items.length; i++){
        tab.push(items[i].innerHTML)
    };
    // get index of selected element
    for (var i=0; i<items.length; i++){
        items[i].onclick = function(){
            index=tab.indexOf(this.innerHTML);
            // get weather
            getWeather((data[index].name), (data[index].latitude), (data[index].longitude));
        };
    };
};

function getWeekday(dateString) {
  const date = new Date(dateString);
  const options = { weekday: 'long' };
  return date.toLocaleDateString(undefined, options);
}

function convertDateFormat(dateString) {
  const parts = dateString.split('-');
  const day = parts[2];
  const month = parts[1];
  const year = parts[0];
  return `${day}/${month}/${year}`;
}



//get weather and render
async function getWeather (name,lat,lon){
    const weatherUrl=("https://api.open-meteo.com/v1/forecast?")
    const units = ("temperature_unit=celsius&windspeed_unit=kmh");
    const curWeather = ("current_weather=true&timezone=GMT");
    let cords = (`latitude=${lat}&longitude=${lon}`)
    const weather_params_hourly = ("temperature_2m,precipitation_probability,windspeed_10m,weathercode");
    const weather_params_daily = ("temperature_2m_max,temperature_2m_min,weathercode");
    inputBox.value = ("");
    searchBox.innerHTML= ("");
    searchWrapper.classList.remove("active");

    // fetch from API
    let res = await fetch(`${weatherUrl}&${curWeather}&${units}&${cords}&hourly=${weather_params_hourly}&daily=${weather_params_daily}`);
    let data = await res.json();
    console.log(data);
    //let iconIndex = (data.current_weather.weathercode);

    let html = ``

    for (let i=0; i < 168; i=i+24){
        let oneDayHtml = `
        <div class="flex flex-col items-center  justify-center  text-gray-700  bg-white-300">
                    <div  class="sm:w-full sm:max-w-screen-sm bg-white sm:p-10 p-5 rounded-xl ring-2 ring-blue ring-opacity-40 shadow-lg mb-4 m-2 ">
       `

        let hoursHtml = ` <div class="grid max-w-screen-xl grid-cols-2 sm:grid-cols-2 md:grid-cols-4  p-4 mx-auto text-gray-900  sm:p-8 text-center ">`;

        let hour = 0;
        let minTemp =  Math.round(data.daily.temperature_2m_min[i/24]);
        let maxTemp = Math.round(data.daily.temperature_2m_max[i/24]);
        let date = data.daily.time[i/24];
        const dayWeathercode = data.daily.weathercode[i/24];
        for (let j=i; j < i+24; j+=3){
            let oneHourHtml = `
            <div class="flex flex-col items-center mb-5 ">
                      <span class="font-semibold text-lg">${hour}:00</span>
                      <div class="h-24 w-24"><img src="${ "static/svg-static/"+ condition[data.hourly.weathercode[j]].icon}"></div>
                      <span  class="font-semibold mt-1 text-sm">${data.hourly.temperature_2m[j]}°C</span>
                      <span class="text-xs font-semibold text-gray-600">Rain: ${data.hourly.precipitation_probability[j]}%</span>
                      <span class="text-xs font-semibold text-gray-600">Wind: ${data.hourly.windspeed_10m[j]} km/h</span>
                  
                  </div>
            `

            //console.log(condition[data.hourly.weathercode[j]]);
            //console.log("precipitation_probability:", data.hourly.precipitation_probability[j])
            //console.log("temperature_2m:", data.hourly.temperature_2m[j])
            //console.log("time:", data.hourly.time[j])
            //console.log("weathercode:", data.hourly.weathercode[j])
            //console.log("windspeed_10m:", data.hourly.windspeed_10m[j])
            hoursHtml += oneHourHtml
            hour += 3
            
        }

        html += oneDayHtml

        

        const dayIcon = condition[dayWeathercode].icon

       const dynamicIconPath= "static/svg/"+ dayIcon


        html += `<div class="flex justify-between">
                  <div class="flex flex-col">
                      <span    class="text-6xl">${minTemp}/${maxTemp}°C</span>
                      <span class="font-semibold mt-1 text-gray-500"> ${convertDateFormat(date)}, ${getWeekday(date)}</span>
                  </div>
                  
                  <div class="h-24 w-24"><img src="${dynamicIconPath}"></div>
              </div>`

        html += hoursHtml

        html += "</div></div></div>"
    }


    const container = document.querySelector("#weather-container");

    container.innerHTML = html;

};

// run script 
inputBox.addEventListener("input", () => searchLocations(inputBox.value));

document.addEventListener("DOMContentLoaded", function(event) { 
    const options = {
        enableHighAccuracy: true,
        timeout: 5000,
        maximumAge: 0,
      };
      
      function success(pos) {
        const crd = pos.coords;
      
        console.log("Your current position is:");
        console.log(`Latitude : ${crd.latitude}`);
        console.log(`Longitude: ${crd.longitude}`);
        console.log(`More or less ${crd.accuracy} meters.`);

        getWeather("your location", crd.latitude, crd. longitude )
      }
      
      function error(err) {
        console.warn(`ERROR(${err.code}): ${err.message}`);
      }
      
      navigator.geolocation.getCurrentPosition(success, error, options);
  });
      </script>
  
  </body></html>